<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicativo Flask con APIs Externas</title>
    <script>
        async function fetchData() {
            try {
                const datetimeResponse = await fetch('/get/datetime');
                const datetimeData = await datetimeResponse.json();
                document.getElementById('datetime').innerText = datetimeData.last_update || "Error al obtener datos";

                const tempResponse = await fetch('/get/temperature');
                const tempData = await tempResponse.json();
                document.getElementById('temperature').innerText = tempData.temperature !== undefined ? tempData.temperature + " Â°C" : "Error al obtener datos";

                const cryResponse = await fetch('/get/cry');
                const cryData = await cryResponse.json();
                document.getElementById('cry').innerText = cryData.message || "Error al obtener datos";
            } catch (error) {
                console.error("Error al obtener datos:", error);
            }
        }

        function reloadPage() {
            fetchData();
        }
    </script>
</head>
<body onload="fetchData()">
    <h1>Aplicativo Flask con Datos de APIs Externas</h1>
    <p><strong>Last Update:</strong> <span id="datetime"></span></p>
    <p><strong>Temperature:</strong> <span id="temperature"></span></p>
    <p><strong>Crying:</strong> <span id="cry"></span></p>
    <button onclick="reloadPage()" style="font-size: 20px; padding: 15px;">Actualizar Datos</button>
</body>
</html>
